<!DOCTYPE html>
<html lang="ar" dir="rtl" id="app-html">
<head>
    <meta charset="UTF-8">
    <meta name="google-site-verification" content="bztaHOs2gKqd5jfU05FOoaqldzClgyxQNJCKkX4YNQc" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="site-title-tag">Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</title>
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" type="image/png" href="https://i.ibb.co/fzPfcMp0/small-logo.png">
    <link rel="apple-touch-icon" href="https://i.ibb.co/fzPfcMp0/small-logo.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#ffd700">
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #080c14; --card: #1e293b; --accent: #ffd700; --text: #ffffff; --muted: #94a3b8; --blue: #3b82f6; --box-bg: #0f172a; --nav-btn: #ffd700; }
        body.light-mode { --bg: #f8fafc; --card: #ffffff; --text: #0f172a; --muted: #475569; --box-bg: #f1f5f9; --accent: #000000; --nav-btn: #000000; }
        body { background: var(--bg); color: var(--text); font-family: 'IBM Plex Sans Arabic', sans-serif; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; transition: 0.3s; }
        .toast-notification { position: fixed; top: -100px; left: 50%; transform: translateX(-50%); background: var(--blue); color: white; padding: 12px 25px; border-radius: 50px; font-weight: bold; font-size: 0.9rem; box-shadow: 0 5px 15px rgba(0,0,0,0.3); z-index: 9999; transition: top 0.5s; display: flex; align-items: center; gap: 8px; }
        .toast-notification.show { top: 25px; }
        .main-logo { width: 160px; height: auto; margin-top: 30px; margin-bottom: 5px; }
        .site-display-title { color: var(--accent); font-size: 1.8rem; font-weight: bold; margin-bottom: 30px; text-align: center; }
        .controls { position: fixed; top: 15px; left: 15px; display: flex; gap: 8px; z-index: 1000; }
        .btn-tool { background: var(--nav-btn); color: var(--card); border: none; padding: 8px 12px; border-radius: 10px; cursor: pointer; font-weight: bold; font-size: 0.8rem; }
        .card { background: var(--card); border-radius: 20px; padding: 25px; margin-bottom: 15px; width: 100%; max-width: 500px; text-align: center; position: relative; box-shadow: 0 4px 15px rgba(0,0,0,0.1); box-sizing: border-box; }
        .share-btn { position: absolute; top: 15px; left: 15px; background: none; border: 1px solid var(--accent); color: var(--accent); padding: 4px 8px; border-radius: 8px; cursor: pointer; font-size: 0.7rem; font-weight: bold; }
        .event-title { color: var(--accent); font-size: 1.4rem; font-weight: bold; margin-bottom: 5px; }
        .event-date-info { font-size: 0.8rem; color: var(--muted); margin-bottom: 15px; font-weight: bold; }
        .timer-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; direction: ltr; }
        .box { background: var(--box-bg); padding: 8px 5px; border-radius: 12px; }
        .num { display: block; font-size: 1.2rem; font-weight: bold; color: var(--accent); }
        .label { font-size: 0.6rem; color: var(--muted); font-weight: bold; }
        .verse-container { background: var(--card); padding: 20px; border-radius: 15px; margin-bottom: 30px; border-right: 4px solid var(--accent); width: 100%; max-width: 500px; box-sizing: border-box; }
        .quran-text { font-size: 1.15rem; line-height: 2; color: var(--text); display: block; margin-bottom: 10px; font-weight: 500; text-align: center; }
        .verse-ref { color: var(--accent); font-weight: bold; font-size: 0.85rem; display: block; margin-bottom: 10px; text-align: center; }
        .eng-meaning { display: none; background: rgba(0,0,0,0.05); padding: 12px; border-radius: 8px; font-size: 0.85rem; color: var(--muted); line-height: 1.6; border-left: 3px solid var(--blue); margin-top: 10px; direction: ltr; text-align: left; }
        html[lang="en"] .eng-meaning { display: block; }
        .notify-row { margin-top: 15px; display: flex; align-items: center; justify-content: center; gap: 10px; border-top: 1px solid rgba(0,0,0,0.05); padding-top: 12px; }
        .switch { position: relative; width: 34px; height: 20px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; inset: 0; background: #94a3b8; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 14px; width: 14px; left: 3px; bottom: 3px; background: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background: var(--blue); }
        input:checked + .slider:before { transform: translateX(14px); }
        footer { margin-top: auto; padding: 40px 0 20px; text-align: center; width: 100%; max-width: 500px; border-top: 1px solid rgba(148, 163, 184, 0.1); }
        .rights { font-size: 0.8rem; color: var(--muted); margin-bottom: 10px; }
        .dev-link { color: var(--accent); text-decoration: none; font-weight: bold; display: inline-flex; align-items: center; gap: 5px; font-size: 0.9rem; }
    </style>
</head>
<body class="dark-mode">
    <div id="top-toast" class="toast-notification"> <span id="toast-icon"></span> <span id="toast-text"></span> </div>
    
    <div class="controls"> 
        <button class="btn-tool" onclick="toggleTheme()">Ù†Ù…Ø·</button> 
        <button class="btn-tool" id="lang-btn" onclick="toggleLang()">English</button> 
    </div>

    <img src="https://i.ibb.co/DDJWNdj1/main-logo.png" alt="Logo" class="main-logo"> 
    <h1 class="site-display-title" id="main-title-text">Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø°ÙƒÙŠ Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø®ÙŠØ±..</h1>

    <div class="card">
        <button class="share-btn" onclick="shareEvent('ramadan')">Ù…Ø´Ø§Ø±ÙƒØ©</button>
        <div class="event-title" id="t-ramadan">Ø´Ù‡Ø± Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ</div>
        <div class="event-date-info" id="d-info1">1 Ø±Ù…Ø¶Ø§Ù† 1447Ù‡Ù€ | 18 ÙØ¨Ø±Ø§ÙŠØ± 2026Ù…</div>
        <div class="timer-grid">
            <div class="box"><span class="num" id="d-ramadan">0</span><span class="label lb-d">ÙŠÙˆÙ…</span></div>
            <div class="box"><span class="num" id="h-ramadan">0</span><span class="label lb-h">Ø³Ø§Ø¹Ø©</span></div>
            <div class="box"><span class="num" id="m-ramadan">0</span><span class="label lb-m">Ø¯Ù‚ÙŠÙ‚Ø©</span></div>
            <div class="box"><span class="num" id="s-ramadan">0</span><span class="label lb-s">Ø«Ø§Ù†ÙŠØ©</span></div>
        </div>
        <div class="notify-row">
            <span class="n-label">ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡</span>
            <label class="switch"><input type="checkbox" id="notif-sw-ramadan" onchange="toggleNotify('ramadan', this)"><span class="slider"></span></label>
        </div>
    </div>

    <div class="card">
        <button class="share-btn" onclick="shareEvent('eid1')">Ù…Ø´Ø§Ø±ÙƒØ©</button>
        <div class="event-title" id="t-eid1">Ø¹ÙŠØ¯ Ø§Ù„ÙØ·Ø± Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ</div>
        <div class="event-date-info" id="d-info2">1 Ø´ÙˆØ§Ù„ 1447Ù‡Ù€ | 20 Ù…Ø§Ø±Ø³ 2026Ù…</div>
        <div class="timer-grid">
            <div class="box"><span class="num" id="d-eid1">0</span><span class="label lb-d">ÙŠÙˆÙ…</span></div>
            <div class="box"><span class="num" id="h-eid1">0</span><span class="label lb-h">Ø³Ø§Ø¹Ø©</span></div>
            <div class="box"><span class="num" id="m-eid1">0</span><span class="label lb-m">Ø¯Ù‚ÙŠÙ‚Ø©</span></div>
            <div class="box"><span class="num" id="s-eid1">0</span><span class="label lb-s">Ø«Ø§Ù†ÙŠØ©</span></div>
        </div>
        <div class="notify-row">
            <span class="n-label">ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡</span>
            <label class="switch"><input type="checkbox" id="notif-sw-eid1" onchange="toggleNotify('eid1', this)"><span class="slider"></span></label>
        </div>
    </div>

    <div class="verse-container">
        <span class="quran-text" dir="rtl">ï´¿Ø´ÙÙ‡Ù’Ø±Ù Ø±ÙÙ…ÙØ¶ÙØ§Ù†Ù Ù±Ù„ÙÙ‘Ø°ÙÙ‰Ù“ Ø£ÙÙ†Ø²ÙÙ„Ù ÙÙÙŠÙ‡Ù Ù±Ù„Ù’Ù‚ÙØ±Ù’Ø¡ÙØ§Ù†Ù Ù‡ÙØ¯Ù‹Û­Ù‰ Ù„ÙÙ‘Ù„Ù†ÙÙ‘Ø§Ø³Ù ÙˆÙØ¨ÙÙŠÙÙ‘Ù†ÙÙ€Ù°ØªÙÛ¢ Ù…ÙÙ‘Ù†Ù Ù±Ù„Ù’Ù‡ÙØ¯ÙÙ‰Ù° ÙˆÙÙ±Ù„Ù’ÙÙØ±Ù’Ù‚ÙØ§Ù†Ù Ûš ÙÙÙ…ÙÙ† Ø´ÙÙ‡ÙØ¯Ù Ù…ÙÙ†ÙƒÙÙ…Ù Ù±Ù„Ø´ÙÙ‘Ù‡Ù’Ø±Ù ÙÙÙ„Ù’ÙŠÙØµÙÙ…Ù’Ù‡Ù Û– ÙˆÙÙ…ÙÙ† ÙƒÙØ§Ù†Ù Ù…ÙØ±ÙÙŠØ¶Ù‹Ø§ Ø£ÙÙˆÙ’ Ø¹ÙÙ„ÙÙ‰Ù° Ø³ÙÙÙØ±ÙÛ¢ ÙÙØ¹ÙØ¯ÙÙ‘Ø©ÙŒÛ­ Ù…ÙÙ‘Ù†Ù’ Ø£ÙÙŠÙÙ‘Ø§Ù…Ù Ø£ÙØ®ÙØ±Ù Û— ÙŠÙØ±ÙÙŠØ¯Ù Ù±Ù„Ù„ÙÙ‘Ù‡Ù Ø¨ÙÙƒÙÙ…Ù Ù±Ù„Ù’ÙŠÙØ³Ù’Ø±Ù ÙˆÙÙ„ÙØ§ ÙŠÙØ±ÙÙŠØ¯Ù Ø¨ÙÙƒÙÙ…Ù Ù±Ù„Ù’Ø¹ÙØ³Ù’Ø±Ù ÙˆÙÙ„ÙØªÙÙƒÙ’Ù…ÙÙ„ÙÙˆØ§ÛŸ Ù±Ù„Ù’Ø¹ÙØ¯ÙÙ‘Ø©Ù ÙˆÙÙ„ÙØªÙÙƒÙØ¨ÙÙ‘Ø±ÙÙˆØ§ÛŸ Ù±Ù„Ù„ÙÙ‘Ù‡Ù Ø¹ÙÙ„ÙÙ‰Ù° Ù…ÙØ§ Ù‡ÙØ¯ÙÙ‰Ù°ÙƒÙÙ…Ù’ ÙˆÙÙ„ÙØ¹ÙÙ„ÙÙ‘ÙƒÙÙ…Ù’ ØªÙØ´Ù’ÙƒÙØ±ÙÙˆÙ†Ùï´¾</span>
        <span class="verse-ref" id="ref-185">Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù‚Ø±Ø© - Ø¢ÙŠØ© 185</span>
        <div class="eng-meaning">The fasting prescribed for you is the month of Ramadan, the great month in which you have received from God a great favor, namely the Holy Quran, which contains guidance for your religious and worldly interests, clarifies the truth with the clearest explanation, distinguishes between right and wrong, guidance and misguidance, and identifies the people of happiness and the people of misery. This misconception is dispelled by the command to complete its prescribed number of days, and to thank God Almighty upon its completion for His guidance, facilitation, and clarification for His servants, and by reciting the Takbir (Allahu Akbar) upon its conclusion. This includes reciting the Takbir upon sighting the crescent moon of Shawwal until the conclusion of the Eid sermon.
</div>
    </div>

    <div class="card">
        <button class="share-btn" onclick="shareEvent('hajj')">Ù…Ø´Ø§Ø±ÙƒØ©</button>
        <div class="event-title" id="t-hajj">Ø¹Ø´Ø± Ø°ÙŠ Ø§Ù„Ø­Ø¬Ø©</div>
        <div class="event-date-info" id="d-info3">1 Ø°Ùˆ Ø§Ù„Ø­Ø¬Ø© 1447Ù‡Ù€ | 18 Ù…Ø§ÙŠÙˆ 2026Ù…</div>
        <div class="timer-grid">
            <div class="box"><span class="num" id="d-hajj">0</span><span class="label lb-d">ÙŠÙˆÙ…</span></div>
            <div class="box"><span class="num" id="h-hajj">0</span><span class="label lb-h">Ø³Ø§Ø¹Ø©</span></div>
            <div class="box"><span class="num" id="m-hajj">0</span><span class="label lb-m">Ø¯Ù‚ÙŠÙ‚Ø©</span></div>
            <div class="box"><span class="num" id="s-hajj">0</span><span class="label lb-s">Ø«Ø§Ù†ÙŠØ©</span></div>
        </div>
        <div class="notify-row">
            <span class="n-label">ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡</span>
            <label class="switch"><input type="checkbox" id="notif-sw-hajj" onchange="toggleNotify('hajj', this)"><span class="slider"></span></label>
        </div>
    </div>

    <div class="card">
        <button class="share-btn" onclick="shareEvent('eid2')">Ù…Ø´Ø§Ø±ÙƒØ©</button>
        <div class="event-title" id="t-eid2">Ø¹ÙŠØ¯ Ø§Ù„Ø£Ø¶Ø­Ù‰ Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ</div>
        <div class="event-date-info" id="d-info4">10 Ø°Ùˆ Ø§Ù„Ø­Ø¬Ø© 1447Ù‡Ù€ | 27 Ù…Ø§ÙŠÙˆ 2026Ù…</div>
        <div class="timer-grid">
            <div class="box"><span class="num" id="d-eid2">0</span><span class="label lb-d">ÙŠÙˆÙ…</span></div>
            <div class="box"><span class="num" id="h-eid2">0</span><span class="label lb-h">Ø³Ø§Ø¹Ø©</span></div>
            <div class="box"><span class="num" id="m-eid2">0</span><span class="label lb-m">Ø¯Ù‚ÙŠÙ‚Ø©</span></div>
            <div class="box"><span class="num" id="s-eid2">0</span><span class="label lb-s">Ø«Ø§Ù†ÙŠØ©</span></div>
        </div>
        <div class="notify-row">
            <span class="n-label">ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡</span>
            <label class="switch"><input type="checkbox" id="notif-sw-eid2" onchange="toggleNotify('eid2', this)"><span class="slider"></span></label>
        </div>
    </div>

    <div class="verse-container">
        <span class="quran-text" dir="rtl">ï´¿Ù±Ù„Ù’Ø­ÙØ¬ÙÙ‘ Ø£ÙØ´Ù’Ù‡ÙØ±ÙŒÛ­ Ù…ÙÙ‘Ø¹Ù’Ù„ÙÙˆÙ…ÙÙ€Ù°ØªÙŒÛ­ Ûš ÙÙÙ…ÙÙ† ÙÙØ±ÙØ¶Ù ÙÙÙŠÙ‡ÙÙ†ÙÙ‘ Ù±Ù„Ù’Ø­ÙØ¬ÙÙ‘ ÙÙÙ„ÙØ§ Ø±ÙÙÙØ«Ù ÙˆÙÙ„ÙØ§ ÙÙØ³ÙÙˆÙ‚Ù ÙˆÙÙ„ÙØ§ Ø¬ÙØ¯ÙØ§Ù„Ù ÙÙÙ‰ Ù±Ù„Ù’Ø­ÙØ¬ÙÙ‘ Û— ÙˆÙÙ…ÙØ§ ØªÙÙÙ’Ø¹ÙÙ„ÙÙˆØ§ÛŸ Ù…ÙÙ†Ù’ Ø®ÙÙŠÙ’Ø±ÙÛ¢ ÙŠÙØ¹Ù’Ù„ÙÙ…Ù’Ù‡Ù Ù±Ù„Ù„ÙÙ‘Ù‡Ù Û— ÙˆÙØªÙØ²ÙÙˆÙÙ‘Ø¯ÙÙˆØ§ÛŸ ÙÙØ¥ÙÙ†ÙÙ‘ Ø®ÙÙŠÙ’Ø±Ù Ù±Ù„Ø²ÙÙ‘Ø§Ø¯Ù Ù±Ù„Ù’ØªÙÙ‘Ù‚Ù’ÙˆÙ‰Ù° Ûš ÙˆÙÙ±ØªÙÙ‘Ù‚ÙÙˆÙ†Ù ÙŠÙÙ€Ù°Ù“Ø£ÙÙˆÛŸÙ„ÙÙ‰ Ù±Ù„Ù’Ø£ÙÙ„Ù’Ø¨ÙÙ€Ù°Ø¨Ùï´¾</span>
        <span class="verse-ref" id="ref-197">Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù‚Ø±Ø© - Ø¢ÙŠØ© 197</span>
        <div class="eng-meaning"><b>General Meaning:</b> It is forbidden for the pilgrim to perform Hajj, and the pilgrim is prohibited from obscene language, immorality, and arguing, while being obligated to be pious and to adhere to acts of obedience

</div>
        </div>
    </div>

    <footer>
        <div class="rights" id="f-rights">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Ù„Ù„Ù…ØªØ¨Ù‚ÙŠ 1447 Ù‡Ù€ - 2026 Ù…</div>
        <a href="https://x.com/sult2009an" target="_blank" class="dev-link">
            <span id="f-dev">Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…Ø·ÙˆØ±</span>
        </a>
    </footer>

    <script>
        const events = {
            ramadan: { 
                date: "2026-02-18T00:00:00+03:00", 
                preDate: "2026-02-17T18:30:00+03:00", 
                name: "Ø´Ù‡Ø± Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ", en: "Holy Ramadan",
                duaAr: "ØªÙ‚Ø¨Ù„ Ø§Ù„Ù„Ù‡ ØµÙŠØ§Ù…ÙƒÙ…", duaEn: "May Allah accept your fast",
                preAr: "Ù‚Ø±Ø¨ Ø´Ù‡Ø± Ø§Ù„Ø®ÙŠØ±.. Ø±Ù…Ø¶Ø§Ù†", preEn: "Ramadan is almost here",
                dAr: "1 Ø±Ù…Ø¶Ø§Ù† 1447Ù‡Ù€ | 18 ÙØ¨Ø±Ø§ÙŠØ± 2026Ù…", dEn: "1 Ramadan 1447 AH | Feb 18, 2026"
            },
            eid1: { 
                date: "2026-03-20T00:00:00+03:00", 
                preDate: "2026-03-19T18:55:00+03:00", 
                name: "Ø¹ÙŠØ¯ Ø§Ù„ÙØ·Ø± Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ", en: "Eid al-Fitr",
                duaAr: "Ø¹ÙŠØ¯ÙƒÙ… Ù…Ø¨Ø§Ø±Ùƒ", duaEn: "Eid Mubarak",
                preAr: "Ù‚Ø±Ø¨ Ø¹ÙŠØ¯ Ø§Ù„ÙØ·Ø±", preEn: "Eid al-Fitr is near",
                dAr: "1 Ø´ÙˆØ§Ù„ 1447Ù‡Ù€ | 20 Ù…Ø§Ø±Ø³ 2026Ù…", dEn: "1 Shawwal 1447 AH | Mar 20, 2026"
            },
            hajj: { 
                date: "2026-05-18T00:00:00+03:00", 
                preDate: "2026-05-17T19:00:00+03:00", 
                name: "Ø¹Ø´Ø± Ø°ÙŠ Ø§Ù„Ø­Ø¬Ø©", en: "10 Days of Dhu al-Hijjah",
                duaAr: "Ø£ÙØ¶Ù„ Ø£ÙŠØ§Ù… Ø§Ù„Ø¯Ù†ÙŠØ§", duaEn: "Best days of the year",
                preAr: "Ø³ØªØ¨Ø¯Ø£ Ø¹Ø´Ø± Ø°ÙŠ Ø§Ù„Ø­Ø¬Ø©", preEn: "Dhu al-Hijjah days starting soon",
                dAr: "1 Ø°Ùˆ Ø§Ù„Ø­Ø¬Ø© 1447Ù‡Ù€ | 18 Ù…Ø§ÙŠÙˆ 2026Ù…", dEn: "1 Dhu al-Hijjah 1447 AH | May 18, 2026"
            },
            eid2: { 
                date: "2026-05-27T00:00:00+03:00", 
                preDate: "2026-05-26T19:00:00+03:00", 
                name: "Ø¹ÙŠØ¯ Ø§Ù„Ø£Ø¶Ø­Ù‰ Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ", en: "Eid al-Adha",
                duaAr: "Ø£Ø¶Ø­Ù‰ Ù…Ø¨Ø§Ø±Ùƒ", duaEn: "Eid al-Adha Mubarak",
                preAr: "Ù‚Ø±Ø¨ Ø¹ÙŠØ¯ Ø§Ù„Ø£Ø¶Ø­Ù‰", preEn: "Eid al-Adha is near",
                dAr: "10 Ø°Ùˆ Ø§Ù„Ø­Ø¬Ø© 1447Ù‡Ù€ | 27 Ù…Ø§ÙŠÙˆ 2026Ù…", dEn: "10 Dhu al-Hijjah 1447 AH | May 27, 2026"
            }
        };

        let activeTimeouts = [];

        function showToast(msg) {
            const toast = document.getElementById('top-toast');
            document.getElementById('toast-text').innerText = msg;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3500);
        }

        function updateTimers() {
            Object.keys(events).forEach(key => {
                const diff = new Date(events[key].date) - Date.now();
                if (diff > 0) {
                    document.getElementById(`d-${key}`).innerText = Math.floor(diff / 86400000);
                    document.getElementById(`h-${key}`).innerText = Math.floor((diff % 86400000) / 3600000);
                    document.getElementById(`m-${key}`).innerText = Math.floor((diff % 3600000) / 60000);
                    document.getElementById(`s-${key}`).innerText = Math.floor((diff % 60000) / 1000);
                }
            });
        }
        setInterval(updateTimers, 1000);

        function scheduleNotifications() {
            activeTimeouts.forEach(clearTimeout);
            activeTimeouts = [];

            const now = Date.now();
            const isAr = document.getElementById('app-html').dir === "rtl";

            Object.keys(events).forEach(key => {
                // Ø§Ù„ØªØ£ÙƒØ¯ Ø£Ù† Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ù…ÙØ¹Ù„ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø­Ø¯Ø«
                if (localStorage.getItem('notif_' + key) === 'true') {
                    const targetTime = new Date(events[key].date).getTime();
                    const preTime = new Date(events[key].preDate).getTime();

                    // Ø¬Ø¯ÙˆÙ„Ø© ØªÙ†Ø¨ÙŠÙ‡ Ù…Ø§ Ù‚Ø¨Ù„ Ø§Ù„Ø­Ø¯Ø«
                    if (preTime > now && localStorage.getItem(`sent_pre_${key}`) !== 'true') {
                        const t1 = setTimeout(() => {
                            new Notification(isAr ? events[key].name : events[key].en, {
                                body: isAr ? events[key].preAr : events[key].preEn,
                                icon: 'https://i.ibb.co/fzPfcMp0/small-logo.png'
                            });
                            localStorage.setItem(`sent_pre_${key}`, 'true');
                        }, preTime - now);
                        activeTimeouts.push(t1);
                    }

                    // Ø¬Ø¯ÙˆÙ„Ø© ØªÙ†Ø¨ÙŠÙ‡ ÙˆÙ‚Øª Ø§Ù„Ø­Ø¯Ø«
                    if (targetTime > now && localStorage.getItem(`sent_main_${key}`) !== 'true') {
                        const t2 = setTimeout(() => {
                            new Notification(isAr ? events[key].name : events[key].en, {
                                body: isAr ? events[key].duaAr : events[key].duaEn,
                                icon: 'https://i.ibb.co/fzPfcMp0/small-logo.png'
                            });
                            localStorage.setItem(`sent_main_${key}`, 'true');
                        }, targetTime - now);
                        activeTimeouts.push(t2);
                    }
                }
            });
        }

        async function toggleNotify(key, el) {
            const isAr = document.getElementById('app-html').dir === "rtl";
            if (el.checked) {
                const perm = await Notification.requestPermission();
                if (perm === "granted") {
                    localStorage.setItem('notif_' + key, 'true');
                    scheduleNotifications();
                    showToast(isAr ? "ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡" : "Alert enabled");
                } else {
                    el.checked = false;
                    showToast(isAr ? "ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª" : "Allow notifications");
                }
            } else {
                localStorage.setItem('notif_' + key, 'false');
                // ØªØµÙÙŠØ± Ø³Ø¬Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¹Ù†Ø¯ Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù Ù„Ø¥ØªØ§Ø­Ø© Ø§Ù„ÙØ±ØµØ© Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙØ¹ÙŠÙ„ Ù…Ø³ØªÙ‚Ø¨Ù„Ø§Ù‹
                localStorage.removeItem(`sent_pre_${key}`);
                localStorage.removeItem(`sent_main_${key}`);
                scheduleNotifications();
                showToast(isAr ? "ØªÙ… Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù" : "Disabled");
            }
        }

          async function shareEvent(key) {
        const ev = events[key];
        const isAr = document.getElementById('app-html').dir === "rtl";
        const d = document.getElementById(`d-${key}`).innerText;
        const h = document.getElementById(`h-${key}`).innerText;
        
        let text = isAr ? 
            `${ev.emj} Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù„Ù€ ${ev.name}:\nâŒ› ${d} ÙŠÙˆÙ… Ùˆ ${h} Ø³Ø§Ø¹Ø©\nâœ¨ ${ev.duaAr}\n\nğŸ“ ØªØ§Ø¨Ø¹ Ø§Ù„Ø¹Ø¯Ø§Ø¯:\n${window.location.href}` :
            `${ev.emj} Remaining for ${ev.en}:\nâ³ ${d} Days and ${h} Hours\nâœ¨ ${ev.duaEn}\n\nğŸ“ Follow here:\n${window.location.href}`;

        try {
            if (navigator.share) {
                await navigator.share({ text: text });
            } else {
                await navigator.clipboard.writeText(text);
                showToast(isAr ? "ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù†Øµ Ù„Ù…Ø´Ø§Ø±ÙƒØªÙ‡! ğŸ“‹" : "Text copied to clipboard! ğŸ“‹", "ğŸ“‹");
            }
        } catch (err) { console.log(err); }
    }

        function toggleTheme() {
            const isLight = document.body.classList.toggle('light-mode');
            localStorage.setItem('theme', isLight ? 'light' : 'dark');
        }

        function toggleLang() {
            const isAr = document.getElementById('app-html').dir === "rtl";
            applyLang(isAr ? "en" : "ar");
            localStorage.setItem('lang', isAr ? "en" : "ar");
        }

        function applyLang(lang) {
            const isEn = lang === "en";
            const html = document.getElementById('app-html');
            html.dir = isEn ? "ltr" : "rtl";
            html.lang = lang;
            document.getElementById('lang-btn').innerText = isEn ? "Ø¹Ø±Ø¨ÙŠ" : "English";
            document.getElementById('main-title-text').innerText = isEn ? "Smart Countdown" : "Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø°ÙƒÙŠ Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø®ÙŠØ±..";
            
            Object.keys(events).forEach((key, i) => {
                const titleEl = document.getElementById(`t-${key}`);
                const infoEl = document.getElementById(`d-info${i+1}`);
                if(titleEl) titleEl.innerText = isEn ? events[key].en : events[key].name;
                if(infoEl) infoEl.innerText = isEn ? events[key].dEn : events[key].dAr;
            });
            document.querySelectorAll('.lb-d').forEach(el => el.innerText = isEn ? "Days" : "ÙŠÙˆÙ…");
            document.querySelectorAll('.lb-h').forEach(el => el.innerText = isEn ? "Hrs" : "Ø³Ø§Ø¹Ø©");
            document.querySelectorAll('.lb-m').forEach(el => el.innerText = isEn ? "Min" : "Ø¯Ù‚ÙŠÙ‚Ø©");
            document.querySelectorAll('.lb-s').forEach(el => el.innerText = isEn ? "Sec" : "Ø«Ø§Ù†ÙŠØ©");
            document.querySelectorAll('.n-label').forEach(el => el.innerText = isEn ? "Enable Alert" : "ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡");
        }

        window.onload = function() {
            applyLang(localStorage.getItem('lang') || "ar");
            if (localStorage.getItem('theme') === 'light') document.body.classList.add('light-mode');
            
            Object.keys(events).forEach(key => {
                if (localStorage.getItem('notif_' + key) === 'true') {
                    const sw = document.getElementById('notif-sw-' + key);
                    if(sw) sw.checked = true;
                }
            });
            updateTimers();
            scheduleNotifications();
            if ('serviceWorker' in navigator) navigator.serviceWorker.register('/sw.js').catch(() => {});
        };
    </script>
</body>
</html>
