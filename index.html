<!DOCTYPE html>
<html lang="ar" dir="rtl" id="app-html">
<head>
    <meta charset="UTF-8">
    <meta name="google-site-verification" content="bztaHOs2gKqd5jfU05FOoaqldzClgyxQNJCKkX4YNQc" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="site-title-tag">Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø°ÙƒÙŠ Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø®ÙŠØ±..</title>
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" type="image/png" href="https://i.ibb.co/fzPfcMp0/small-logo.png">
    <link rel="apple-touch-icon" href="https://i.ibb.co/fzPfcMp0/small-logo.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#ffd700">
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #080c14; --card: #1e293b; --accent: #ffd700; --text: #ffffff; --muted: #94a3b8; --blue: #3b82f6; --box-bg: #0f172a; --nav-btn: #ffd700; }
        body.light-mode { --bg: #f8fafc; --card: #ffffff; --text: #0f172a; --muted: #475569; --box-bg: #f1f5f9; --accent: #000000; --nav-btn: #000000; }
        body { background: var(--bg); color: var(--text); font-family: 'IBM Plex Sans Arabic', sans-serif; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; transition: 0.3s; }
        .toast-notification { position: fixed; top: -100px; left: 50%; transform: translateX(-50%); background: var(--blue); color: white; padding: 12px 25px; border-radius: 50px; font-weight: bold; font-size: 0.9rem; box-shadow: 0 5px 15px rgba(0,0,0,0.3); z-index: 9999; transition: top 0.5s cubic-bezier(0.18, 0.89, 0.32, 1.28); display: flex; align-items: center; gap: 8px; white-space: nowrap; }
        .toast-notification.show { top: 25px; }
        .main-logo { width: 160px; height: auto; margin-top: 30px; margin-bottom: 5px; }
        .site-display-title { color: var(--accent); font-size: 1.8rem; font-weight: bold; margin-bottom: 30px; text-align: center; }
        .controls { position: fixed; top: 15px; left: 15px; display: flex; gap: 8px; z-index: 1000; }
        .btn-tool { background: var(--nav-btn); color: var(--card); border: none; padding: 8px 12px; border-radius: 10px; cursor: pointer; font-weight: bold; font-size: 0.8rem; }
        .card { background: var(--card); border-radius: 20px; padding: 25px; margin-bottom: 15px; width: 100%; max-width: 500px; text-align: center; position: relative; box-shadow: 0 4px 15px rgba(0,0,0,0.1); box-sizing: border-box; }
        .share-btn { position: absolute; top: 15px; left: 15px; background: none; border: 1px solid var(--accent); color: var(--accent); padding: 4px 8px; border-radius: 8px; cursor: pointer; font-size: 0.7rem; font-weight: bold; }
        .event-title { color: var(--accent); font-size: 1.4rem; font-weight: bold; margin-bottom: 5px; }
        .event-date-info { font-size: 0.8rem; color: var(--muted); margin-bottom: 15px; font-weight: bold; }
        .timer-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; direction: ltr; }
        .box { background: var(--box-bg); padding: 8px 5px; border-radius: 12px; }
        .num { display: block; font-size: 1.2rem; font-weight: bold; color: var(--accent); }
        .label { font-size: 0.6rem; color: var(--muted); font-weight: bold; }
        .verse-container { background: var(--card); padding: 20px; border-radius: 15px; margin-bottom: 30px; border-right: 4px solid var(--accent); width: 100%; max-width: 500px; box-sizing: border-box; }
        .quran-text { font-size: 1.15rem; line-height: 2; color: var(--text); display: block; margin-bottom: 10px; font-weight: 500; text-align: center; }
        .verse-ref { color: var(--accent); font-weight: bold; font-size: 0.85rem; display: block; margin-bottom: 10px; text-align: center; }
        .eng-meaning { display: none; background: rgba(0,0,0,0.05); padding: 12px; border-radius: 8px; font-size: 0.85rem; color: var(--muted); line-height: 1.6; border-left: 3px solid var(--blue); margin-top: 10px; direction: ltr; text-align: left; }
        html[lang="en"] .eng-meaning { display: block; }
        .notify-row { margin-top: 15px; display: flex; align-items: center; justify-content: center; gap: 10px; border-top: 1px solid rgba(0,0,0,0.05); padding-top: 12px; }
        .switch { position: relative; width: 34px; height: 20px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; inset: 0; background: #94a3b8; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 14px; width: 14px; left: 3px; bottom: 3px; background: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background: var(--blue); }
        input:checked + .slider:before { transform: translateX(14px); }
        footer { margin-top: auto; padding: 40px 0 20px; text-align: center; width: 100%; max-width: 500px; border-top: 1px solid rgba(148, 163, 184, 0.1); }
        .rights { font-size: 0.8rem; color: var(--muted); margin-bottom: 10px; }
        .dev-link { color: var(--accent); text-decoration: none; font-weight: bold; display: inline-flex; align-items: center; gap: 5px; font-size: 0.9rem; }
    </style>
</head>
<body class="dark-mode">
    <div id="top-toast" class="toast-notification"> <span id="toast-icon"></span> <span id="toast-text"></span> </div>
    
    <div class="controls"> 
        <button class="btn-tool" onclick="toggleTheme()">Ù†Ù…Ø·</button> 
        <button class="btn-tool" id="lang-btn" onclick="toggleLang()">English</button> 
    </div>

    <img src="https://i.ibb.co/DDJWNdj1/main-logo.png" alt="Logo" class="main-logo"> 
    <h1 class="site-display-title" id="main-title-text">Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø°ÙƒÙŠ Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø®ÙŠØ±..</h1>

    <div class="card"> 
        <button class="share-btn" onclick="shareEvent('ramadan')">Ù…Ø´Ø§Ø±ÙƒØ©</button> 
        <div class="event-title" id="t-ramadan">Ø´Ù‡Ø± Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ</div> 
        <div class="event-date-info" id="d-info1">1 Ø±Ù…Ø¶Ø§Ù† 1447Ù‡Ù€ | 18 ÙØ¨Ø±Ø§ÙŠØ± 2026Ù…</div> 
        <div class="timer-grid"> 
            <div class="box"><span class="num" id="d-ramadan">0</span><span class="label lb-d">ÙŠÙˆÙ…</span></div> 
            <div class="box"><span class="num" id="h-ramadan">0</span><span class="label lb-h">Ø³Ø§Ø¹Ø©</span></div> 
            <div class="box"><span class="num" id="m-ramadan">0</span><span class="label lb-m">Ø¯Ù‚ÙŠÙ‚Ø©</span></div> 
            <div class="box"><span class="num" id="s-ramadan">0</span><span class="label lb-s">Ø«Ø§Ù†ÙŠØ©</span></div> 
        </div> 
        <div class="notify-row"> 
            <span class="n-label">ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡</span> 
            <label class="switch"><input type="checkbox" id="notif-sw-ramadan" onchange="toggleNotify('ramadan', this)"><span class="slider"></span></label> 
        </div> 
    </div>

    <div class="card"> 
        <button class="share-btn" onclick="shareEvent('eid1')">Ù…Ø´Ø§Ø±ÙƒØ©</button> 
        <div class="event-title" id="t-eid1">Ø¹ÙŠØ¯ Ø§Ù„ÙØ·Ø± Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ</div> 
        <div class="event-date-info" id="d-info2">1 Ø´ÙˆØ§Ù„ 1447Ù‡Ù€ | 20 Ù…Ø§Ø±Ø³ 2026Ù…</div> 
        <div class="timer-grid"> 
            <div class="box"><span class="num" id="d-eid1">0</span><span class="label lb-d">ÙŠÙˆÙ…</span></div> 
            <div class="box"><span class="num" id="h-eid1">0</span><span class="label lb-h">Ø³Ø§Ø¹Ø©</span></div> 
            <div class="box"><span class="num" id="m-eid1">0</span><span class="label lb-m">Ø¯Ù‚ÙŠÙ‚Ø©</span></div> 
            <div class="box"><span class="num" id="s-eid1">0</span><span class="label lb-s">Ø«Ø§Ù†ÙŠØ©</span></div> 
        </div> 
        <div class="notify-row"> 
            <span class="n-label">ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡</span> 
            <label class="switch"><input type="checkbox" id="notif-sw-eid1" onchange="toggleNotify('eid1', this)"><span class="slider"></span></label> 
        </div> 
    </div>

    <div class="verse-container"> 
        <span class="quran-text" dir="rtl">ï´¿Ø´ÙÙ‡Ù’Ø±Ù Ø±ÙÙ…ÙØ¶ÙØ§Ù†Ù Ù±Ù„ÙÙ‘Ø°ÙÙ‰Ù“ Ø£ÙÙ†Ø²ÙÙ„Ù ÙÙÙŠÙ‡Ù Ù±Ù„Ù’Ù‚ÙØ±Ù’Ø¡ÙØ§Ù†Ù Ù‡ÙØ¯Ù‹Û­Ù‰ Ù„ÙÙ‘Ù„Ù†ÙÙ‘Ø§Ø³Ù ÙˆÙØ¨ÙÙŠÙÙ‘Ù†ÙÙ€Ù°ØªÙÛ¢ Ù…ÙÙ‘Ù†Ù Ù±Ù„Ù’Ù‡ÙØ¯ÙÙ‰Ù° ÙˆÙÙ±Ù„Ù’ÙÙØ±Ù’Ù‚ÙØ§Ù†Ù Ûš ÙÙÙ…ÙÙ† Ø´ÙÙ‡ÙØ¯Ù Ù…ÙÙ†ÙƒÙÙ…Ù Ù±Ù„Ø´ÙÙ‘Ù‡Ù’Ø±Ù ÙÙÙ„Ù’ÙŠÙØµÙÙ…Ù’Ù‡Ù Û– ÙˆÙÙ…ÙÙ† ÙƒÙØ§Ù†Ù Ù…ÙØ±ÙÙŠØ¶Ù‹Ø§ Ø£ÙÙˆÙ’ Ø¹ÙÙ„ÙÙ‰Ù° Ø³ÙÙÙØ±ÙÛ¢ ÙÙØ¹ÙØ¯ÙÙ‘Ø©ÙŒÛ­ Ù…ÙÙ‘Ù†Ù’ Ø£ÙÙŠÙÙ‘Ø§Ù…Ù Ø£ÙØ®ÙØ±Ù Û— ÙŠÙØ±ÙÙŠØ¯Ù Ù±Ù„Ù„ÙÙ‘Ù‡Ù Ø¨ÙÙƒÙÙ…Ù Ù±Ù„Ù’ÙŠÙØ³Ù’Ø±Ù ÙˆÙÙ„ÙØ§ ÙŠÙØ±ÙÙŠØ¯Ù Ø¨ÙÙƒÙÙ…Ù Ù±Ù„Ù’Ø¹ÙØ³Ù’Ø±Ù ÙˆÙÙ„ÙØªÙÙƒÙ’Ù…ÙÙ„ÙÙˆØ§ÛŸ Ù±Ù„Ù’Ø¹ÙØ¯ÙÙ‘Ø©Ù ÙˆÙÙ„ÙØªÙÙƒÙØ¨ÙÙ‘Ø±ÙÙˆØ§ÛŸ Ù±Ù„Ù„ÙÙ‘Ù‡Ù Ø¹ÙÙ„ÙÙ‰Ù° Ù…ÙØ§ Ù‡ÙØ¯ÙÙ‰Ù°ÙƒÙÙ…Ù’ ÙˆÙÙ„ÙØ¹ÙÙ„ÙÙ‘ÙƒÙÙ…Ù’ ØªÙØ´Ù’ÙƒÙØ±ÙÙˆÙ†Ùï´¾</span> 
        <span class="verse-ref" id="ref-185">Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù‚Ø±Ø© - Ø¢ÙŠØ© 185</span> 
        <div class="eng-meaning"><b>General Meaning:</b> The fasting prescribed for you is the month of Ramadan, the great month in which you have received from God a great favor, namely the Holy Quran, which contains guidance for your religious and worldly interests, clarifies the truth with the clearest explanation, distinguishes between right and wrong, guidance and misguidance, and identifies the people of happiness and the people of misery. This misconception is dispelled by the command to complete its prescribed number of days, and to thank God Almighty upon its completion for His guidance, facilitation, and clarification for His servants, and by reciting the Takbir (Allahu Akbar) upon its conclusion. This includes reciting the Takbir upon sighting the crescent moon of Shawwal until the conclusion of the Eid sermon.

</div> 
    </div>

    <div class="card"> 
        <button class="share-btn" onclick="shareEvent('hajj')">Ù…Ø´Ø§Ø±ÙƒØ©</button> 
        <div class="event-title" id="t-hajj">Ø¹Ø´Ø± Ø°ÙŠ Ø§Ù„Ø­Ø¬Ø©</div> 
        <div class="event-date-info" id="d-info3">1 Ø°Ùˆ Ø§Ù„Ø­Ø¬Ø© 1447Ù‡Ù€ | 18 Ù…Ø§ÙŠÙˆ 2026Ù…</div> 
        <div class="timer-grid"> 
            <div class="box"><span class="num" id="d-hajj">0</span><span class="label lb-d">ÙŠÙˆÙ…</span></div> 
            <div class="box"><span class="num" id="h-hajj">0</span><span class="label lb-h">Ø³Ø§Ø¹Ø©</span></div> 
            <div class="box"><span class="num" id="m-hajj">0</span><span class="label lb-m">Ø¯Ù‚ÙŠÙ‚Ø©</span></div> 
            <div class="box"><span class="num" id="s-hajj">0</span><span class="label lb-s">Ø«Ø§Ù†ÙŠØ©</span></div> 
        </div> 
        <div class="notify-row"> 
            <span class="n-label">ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡</span> 
            <label class="switch"><input type="checkbox" id="notif-sw-hajj" onchange="toggleNotify('hajj', this)"><span class="slider"></span></label> 
        </div> 
    </div>

    <div class="card"> 
        <button class="share-btn" onclick="shareEvent('eid2')">Ù…Ø´Ø§Ø±ÙƒØ©</button> 
        <div class="event-title" id="t-eid2">Ø¹ÙŠØ¯ Ø§Ù„Ø£Ø¶Ø­Ù‰ Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ</div> 
        <div class="event-date-info" id="d-info4">10 Ø°Ùˆ Ø§Ù„Ø­Ø¬Ø© 1447Ù‡Ù€ | 27 Ù…Ø§ÙŠÙˆ 2026Ù…</div> 
        <div class="timer-grid"> 
            <div class="box"><span class="num" id="d-eid2">0</span><span class="label lb-d">ÙŠÙˆÙ…</span></div> 
            <div class="box"><span class="num" id="h-eid2">0</span><span class="label lb-h">Ø³Ø§Ø¹Ø©</span></div> 
            <div class="box"><span class="num" id="m-eid2">0</span><span class="label lb-m">Ø¯Ù‚ÙŠÙ‚Ø©</span></div> 
            <div class="box"><span class="num" id="s-eid2">0</span><span class="label lb-s">Ø«Ø§Ù†ÙŠØ©</span></div> 
        </div> 
        <div class="notify-row"> 
            <span class="n-label">ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡</span> 
            <label class="switch"><input type="checkbox" id="notif-sw-eid2" onchange="toggleNotify('eid2', this)"><span class="slider"></span></label> 
        </div> 
    </div>

    <div class="verse-container">
        <span class="quran-text" dir="rtl">ï´¿Ù±Ù„Ù’Ø­ÙØ¬ÙÙ‘ Ø£ÙØ´Ù’Ù‡ÙØ±ÙŒÛ­ Ù…ÙÙ‘Ø¹Ù’Ù„ÙÙˆÙ…ÙÙ€Ù°ØªÙŒÛ­ Ûš ÙÙÙ…ÙÙ† ÙÙØ±ÙØ¶Ù ÙÙÙŠÙ‡ÙÙ†ÙÙ‘ Ù±Ù„Ù’Ø­ÙØ¬ÙÙ‘ ÙÙÙ„ÙØ§ Ø±ÙÙÙØ«Ù ÙˆÙÙ„ÙØ§ ÙÙØ³ÙÙˆÙ‚Ù ÙˆÙÙ„ÙØ§ Ø¬ÙØ¯ÙØ§Ù„Ù ÙÙÙ‰ Ù±Ù„Ù’Ø­ÙØ¬ÙÙ‘ Û— ÙˆÙÙ…ÙØ§ ØªÙÙÙ’Ø¹ÙÙ„ÙÙˆØ§ÛŸ Ù…ÙÙ†Ù’ Ø®ÙÙŠÙ’Ø±ÙÛ¢ ÙŠÙØ¹Ù’Ù„ÙÙ…Ù’Ù‡Ù Ù±Ù„Ù„ÙÙ‘Ù‡Ù Û— ÙˆÙØªÙØ²ÙÙˆÙÙ‘Ø¯ÙÙˆØ§ÛŸ ÙÙØ¥ÙÙ†ÙÙ‘ Ø®ÙÙŠÙ’Ø±Ù Ù±Ù„Ø²ÙÙ‘Ø§Ø¯Ù Ù±Ù„ØªÙÙ‘Ù‚Ù’ÙˆÙÙ‰Ù° Ûš ÙˆÙÙ±ØªÙÙ‘Ù‚ÙÙˆÙ†Ù ÙŠÙÙ€Ù°Ù“Ø£ÙÙˆÛŸÙ„ÙÙ‰ Ù±Ù„Ù’Ø£ÙÙ„Ù’Ø¨ÙÙ€Ù°Ø¨Ùï´¾</span>
        <span class="verse-ref" id="ref-197">Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù‚Ø±Ø© - Ø¢ÙŠØ© 197</span>
        <div class="eng-meaning"><b>General Meaning:</b> It is forbidden for the pilgrim to perform Hajj, and the pilgrim is prohibited from obscene language, immorality, and arguing, while being obligated to be pious and to adhere to acts of obedience.</div>
    </div>

    <footer> 
        <div class="rights" id="f-rights">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Ù„Ù„Ù…ØªØ¨Ù‚ÙŠ 1447 Ù‡Ù€ - 2026 Ù…</div> 
        <a href="https://x.com/sult2009an" target="_blank" class="dev-link"> 
            <span id="f-dev">Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…Ø·ÙˆØ±</span> 
            <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.045 4.126H5.078z"/></svg> 
        </a> 
    </footer>

<script>
    const events = {
        ramadan: { 
            date: "2026-02-18T00:00:00+03:00", 
            preDate: "2026-02-17T09:00:00+03:00", 
            name: "Ø´Ù‡Ø± Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ", en: "Holy Ramadan", emj: "ğŸŒ™",
            duaAr: "Ø§Ù„Ù„Ù‡Ù… ØªÙ‚Ø¨Ù„ Ø§Ù„ØµÙŠØ§Ù… ÙˆØ§Ù„Ù‚ÙŠØ§Ù… ÙˆØµØ§Ù„Ø­ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„", 
            duaEn: "O God, accept our fasting and prayers",
            duaPreAr: "ØºØ¯Ø§Ù‹ Ø£ÙˆÙ„ Ø£ÙŠØ§Ù… Ø´Ù‡Ø± Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±ÙƒØŒ ØªÙ‚Ø¨Ù„ Ø§Ù„Ù„Ù‡ Ù…Ù†ÙƒÙ…",
            duaPreEn: "Tomorrow is the first day of Ramadan"
        },
        eid1: { 
            date: "2026-03-20T00:00:00+03:00", 
            preDate: "2026-03-19T09:00:00+03:00", 
            name: "Ø¹ÙŠØ¯ Ø§Ù„ÙØ·Ø± Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ", en: "Eid al-Fitr", emj: "âœ¨",
            duaAr: "Ø¹ÙŠØ¯ÙƒÙ… Ù…Ø¨Ø§Ø±ÙƒØŒ ØªÙ‚Ø¨Ù„ Ø§Ù„Ù„Ù‡ Ù…Ù†Ø§ ÙˆÙ…Ù†ÙƒÙ…", 
            duaEn: "Eid Mubarak! May Allah accept from us",
            duaPreAr: "ØºØ¯Ø§Ù‹ Ø£ÙˆÙ„ Ø£ÙŠØ§Ù… Ø¹ÙŠØ¯ Ø§Ù„ÙØ·Ø± Ø§Ù„Ø³Ø¹ÙŠØ¯ØŒ ÙƒÙ„ Ø¹Ø§Ù… ÙˆØ£Ù†ØªÙ… Ø¨Ø®ÙŠØ±",
            duaPreEn: "Tomorrow is Eid al-Fitr, Happy Eid!"
        },
        hajj: { 
            date: "2026-05-18T00:00:00+03:00", 
            preDate: "2026-05-17T09:00:00+03:00", 
            name: "Ø¹Ø´Ø± Ø°ÙŠ Ø§Ù„Ø­Ø¬Ø©", en: "10 Days of Dhu al-Hijjah", emj: "ğŸ•‹",
            duaAr: "Ø£ÙØ¶Ù„ Ø£ÙŠØ§Ù… Ø§Ù„Ø¯Ù†ÙŠØ§ØŒ Ø¶Ø§Ø¹ÙÙˆØ§ ÙÙŠÙ‡Ø§ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„", 
            duaEn: "The best days of the year, increase good deeds",
            duaPreAr: "ØªØ¨Ø¯Ø£ ØºØ¯Ø§Ù‹ Ø¹Ø´Ø± Ø°ÙŠ Ø§Ù„Ø­Ø¬Ø©ØŒ Ø§Ø³ØªØ¹Ø¯ÙˆØ§ Ù„Ø®ÙŠØ± Ø§Ù„Ø£ÙŠØ§Ù…",
            duaPreEn: "The best 10 days of the year start tomorrow"
        },
        eid2: { 
            date: "2026-05-27T00:00:00+03:00", 
            preDate: "2026-05-26T09:00:00+03:00", 
            name: "Ø¹ÙŠØ¯ Ø§Ù„Ø£Ø¶Ø­Ù‰ Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ", en: "Eid al-Adha", emj: "ğŸ‘",
            duaAr: "Ø¹ÙŠØ¯ Ø£Ø¶Ø­Ù‰ Ù…Ø¨Ø§Ø±ÙƒØŒ ØªÙ‚Ø¨Ù„ Ø§Ù„Ù„Ù‡ Ø·Ø§Ø¹Ø§ØªÙƒÙ…", 
            duaEn: "Eid al-Adha Mubarak",
            duaPreAr: "ØºØ¯Ø§Ù‹ ÙŠÙˆÙ… Ø§Ù„Ù†Ø­Ø±ØŒ Ø¹ÙŠØ¯ Ø£Ø¶Ø­Ù‰ Ù…Ø¨Ø§Ø±Ùƒ Ù…Ù‚Ø¯Ù…Ø§Ù‹",
            duaPreEn: "Tomorrow is Eid al-Adha"
        }
    };

    let timeouts = {};

    function showToast(msg) {
        const toast = document.getElementById('top-toast');
        document.getElementById('toast-text').innerText = msg;
        toast.classList.add('show');
        setTimeout(() => toast.classList.remove('show'), 3500);
    }

    function updateTimers() {
        Object.keys(events).forEach(key => {
            const diff = new Date(events[key].date) - Date.now();
            const elD = document.getElementById(`d-${key}`);
            if (!elD) return;

            if (diff > 0) {
                elD.innerText = Math.floor(diff / 86400000);
                document.getElementById(`h-${key}`).innerText = Math.floor((diff % 86400000) / 3600000);
                document.getElementById(`m-${key}`).innerText = Math.floor((diff % 3600000) / 60000);
                document.getElementById(`s-${key}`).innerText = Math.floor((diff % 60000) / 1000);
            } else {
                elD.innerText = "0";
                document.getElementById(`h-${key}`).innerText = "0";
                document.getElementById(`m-${key}`).innerText = "0";
                document.getElementById(`s-${key}`).innerText = "0";
            }
        });
    }

    setInterval(updateTimers, 1000);

    // Ø§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¬ÙˆÙ‡Ø±ÙŠ Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù„ØªØ¹Ù…Ù„ Ø¹Ø¨Ø± Ø§Ù„Ù€ Service Worker
    async function sendNotification(title, body) {
        if (Notification.permission === "granted") {
            const reg = await navigator.serviceWorker.getRegistration();
            if (reg) {
                reg.showNotification(title, {
                    body: body,
                    icon: 'https://i.ibb.co/fzPfcMp0/small-logo.png',
                    badge: 'https://i.ibb.co/fzPfcMp0/small-logo.png'
                });
            } else {
                new Notification(title, { body, icon: 'https://i.ibb.co/fzPfcMp0/small-logo.png' });
            }
        }
    }

    function scheduleNotifications(key) {
        if (localStorage.getItem('notif_' + key) !== 'true') return;
        
        // Ù…Ø³Ø­ Ø£ÙŠ Ù…Ø¤Ù‚ØªØ§Øª Ù‚Ø¯ÙŠÙ…Ø© Ù„ØªØ¬Ù†Ø¨ Ø§Ù„ØªÙƒØ±Ø§Ø±
        if (timeouts[key + '_pre']) clearTimeout(timeouts[key + '_pre']);
        if (timeouts[key + '_main']) clearTimeout(timeouts[key + '_main']);

        const now = Date.now();
        const eventTime = new Date(events[key].date).getTime();
        const preTime = new Date(events[key].preDate).getTime();
        const isAr = document.getElementById('app-html').dir === "rtl";

        if (preTime > now) {
            timeouts[key + '_pre'] = setTimeout(() => {
                sendNotification(
                    isAr ? `Ù‚Ø±ÙŠØ¨Ø§Ù‹: ${events[key].name}` : `Soon: ${events[key].en}`,
                    isAr ? events[key].duaPreAr : events[key].duaPreEn
                );
            }, preTime - now);
        }

        if (eventTime > now) {
            timeouts[key + '_main'] = setTimeout(() => {
                sendNotification(
                    isAr ? `${events[key].emj} Ø­Ù„Ù‘ Ø§Ù„Ù…ÙˆØ¹Ø¯!` : `${events[key].emj} Event Started!`,
                    isAr ? events[key].duaAr : events[key].duaEn
                );
            }, eventTime - now);
        }
    }

    async function toggleNotify(key, el) {
        const isAr = document.getElementById('app-html').dir === "rtl";
        if (el.checked) {
            const perm = await Notification.requestPermission();
            if (perm === "granted") {
                localStorage.setItem('notif_' + key, 'true');
                showToast(isAr ? "ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø¨Ù†Ø¬Ø§Ø­" : "Alerts enabled");
                scheduleNotifications(key);
            } else {
                el.checked = false;
                showToast(isAr ? "ÙŠØ¬Ø¨ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªØµÙØ­" : "Please enable notifications in browser");
            }
        } else {
            localStorage.setItem('notif_' + key, 'false');
            if (timeouts[key + '_pre']) clearTimeout(timeouts[key + '_pre']);
            if (timeouts[key + '_main']) clearTimeout(timeouts[key + '_main']);
            showToast(isAr ? "ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡" : "Alerts disabled");
        }
    }

    function toggleTheme() {
        const isLight = document.body.classList.toggle('light-mode');
        localStorage.setItem('theme', isLight ? 'light' : 'dark');
    }

    function toggleLang() {
        const current = localStorage.getItem('lang') || "ar";
        const target = current === "ar" ? "en" : "ar";
        localStorage.setItem('lang', target);
        location.reload(); // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ù„ØªØ­Ø¯ÙŠØ« ÙƒØ§ÙØ© Ø§Ù„Ù†ØµÙˆØµ Ø¨Ø¯Ù‚Ø©
    }

    function applyInitialSettings() {
        const lang = localStorage.getItem('lang') || "ar";
        const isEn = lang === "en";
        const html = document.getElementById('app-html');
        html.dir = isEn ? "ltr" : "rtl";
        html.lang = lang;
        
        if (isEn) {
            document.getElementById('lang-btn').innerText = "Ø¹Ø±Ø¨ÙŠ";
            document.getElementById('main-title-text').innerText = "Smart Days of Goodness Countdown";
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
            Object.keys(events).forEach((key, idx) => {
                document.getElementById(`t-${key}`).innerText = events[key].en;
                document.querySelectorAll('.lb-d')[idx].innerText = "Days";
                document.querySelectorAll('.lb-h')[idx].innerText = "Hrs";
                document.querySelectorAll('.lb-m')[idx].innerText = "Min";
                document.querySelectorAll('.lb-s')[idx].innerText = "Sec";
                document.querySelectorAll('.n-label')[idx].innerText = "Enable Alert";
                document.querySelectorAll('.share-btn')[idx].innerText = "Share";
            });
        }
    }

    async function shareEvent(key) {
        const ev = events[key];
        const isAr = document.getElementById('app-html').dir === "rtl";
        const d = document.getElementById(`d-${key}`).innerText;
        const text = isAr ? 
            `${ev.emj} Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù„Ù€ ${ev.name}: ${d} ÙŠÙˆÙ….\n${window.location.href}` : 
            `${ev.emj} Time left for ${ev.en}: ${d} days.\n${window.location.href}`;
        
        if (navigator.share) {
            navigator.share({ text }).catch(() => {});
        } else {
            navigator.clipboard.writeText(text);
            showToast(isAr ? "ØªÙ… Ø§Ù„Ù†Ø³Ø®!" : "Copied!");
        }
    }

    window.onload = function() {
        applyInitialSettings();
        if (localStorage.getItem('theme') === 'light') document.body.classList.add('light-mode');
        
        Object.keys(events).forEach(key => {
            if (localStorage.getItem('notif_' + key) === 'true') {
                const sw = document.getElementById('notif-sw-' + key);
                if (sw) sw.checked = true;
                scheduleNotifications(key);
            }
        });
        updateTimers();

        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js')
            .then(() => console.log("SW Registered"))
            .catch(err => console.log("SW Error", err));
        }
    };
</script>
</body>
</html>
